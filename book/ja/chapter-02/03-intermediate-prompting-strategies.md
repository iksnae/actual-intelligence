## 中級プロンプトエンジニアリング戦略

基本的なプロンプト作成に慣れてきたら、より高度なテクニックを取り入れてさらに良い結果を得ることができます。これらの中級戦略により、より高い精度が可能になり、ChatGPTの一部の制限を克服するのに役立ちます。

![](./images/prompt-anatomy.jpg){ width=90% }

### 役割の割り当て：ChatGPTにペルソナを与える

強力なテクニックの一つは、ChatGPTに特定の役割またはペルソナを割り当てることです。これにより、特定の視点や専門分野からの応答をフレーム化するのに役立ちます。

**フォーマット**：「あなたには[役割/ペルソナ]として行動してほしいです。[役割に関する追加のコンテキスト]。[あなたのリクエスト]。」

**例**：

`あなたには予算に優しいヨーロッパの目的地を専門とする旅行ガイドとして行動してほしいです。バルセロナの7日間の旅程を推奨してください。無料または低コストのアトラクション、手頃な価格の食事オプション、および交通のヒントを含めてください。`

`あなたには初心者向けのフィットネスコーチとして行動してほしいです。機器を必要とせず、膝に優しい簡単な20分間の自宅ワークアウトルーティンを作成してください。ウォームアップとクールダウンの運動を含めてください。`

`あなたには子供向け書籍の編集者として行動してほしいです。以下の物語の書き出しを検討し、8〜10歳の子供たちにとってより魅力的にするための方法を提案してください。その際、適切な読解レベルで言語を維持してください。`

特定の役割を割り当てることで、単にどのような情報を探しているかだけでなく、応答でどのような視点、トーン、および専門知識のタイプを強調すべきかをChatGPTが理解するのを助けます。

### 形式の指定：出力構造の制御

もう一つの便利なテクニックは、情報の構造化方法を明示的に述べることです。これは複雑な情報をあなたにとって最も有用な方法で整理するのに役立ちます。

**一般的な形式指定には以下が含まれます**：

- 表：比較やデータ提示に最適
- 箇条書き：リストや重要なポイントに理想的
- 番号付きステップ：手順や指示に最適
- Q&A形式：トピックに関する予想される質問に役立つ
- 長所と短所のリスト：意思決定に役立つ

**例**：

`電気自動車とガソリン車を初期コスト、メンテナンス費用、環境への影響、および利便性の観点から比較してください。この情報を2列の表で提示し、表の後に異なるタイプのユーザーにどちらのタイプが適しているかを簡単に要約した段落を提供してください。`

形式を指定することで、情報を消化しやすくするだけでなく、特定の目的に必要な正確なタイプの出力を確実に得ることができます。

### 温度制御：創造性と精度の調整

標準インターフェースでChatGPTの「温度」設定（これはランダム性を制御する技術的パラメータ）を直接変更することはできませんが、プロンプト言語を通じてより創造的または正確な応答を効果的にリクエストすることができます。

**より正確で事実に基づいた応答のために**：
- 「...について簡潔で事実に基づいた説明を提供してください」
- 「...について最も正確で簡潔な回答を教えてください」
- 「十分に確立された情報のみに焦点を当てて、...を説明してください」

**より創造的で多様な応答のために**：
- 「...についてのさまざまな可能性について創造的に考えてください」
- 「...のための多様で革新的なアイデアを生成してください」
- 「...への珍しいまたは従来にない手法を探ってください」

**例**：

*正確なリクエスト*：

`ワクチンが人体でどのように機能するかについて、抗体と免疫反応の役割に焦点を当てた、簡潔で事実に基づいた説明を提供してください。`

*創造的なリクエスト*：

`好奇心旺盛な8歳の子供にワクチンがどのように機能するかを説明するためのさまざまな方法について創造的に考えてください。子供の注意を引くような想像力豊かなたとえと魅力的なシナリオを使ってください。`

### 思考の連鎖：複雑な問題の分解

複雑な問題に対しては、ChatGPTが思考プロセスを段階的に分解するように誘導することができ、それによって多くの場合、より正確な結果につながります。

**フォーマット**：「[問題]を段階的に考えてください。まず[側面1]を分析し、次に[側面2]を検討し、最後に[結論のタイプ]を判断してください。」

**例**：

`この数学の文章問題を段階的に考えてください。まず主要な変数と何を求めているのかを特定し、次に適切な方程式を設定し、各ステップを示しながら数学的に解き、最後に元の問題のコンテキストでその結果が何を意味するのかを解釈してください：

`
カフェでは、コーヒーを1杯4.50ドル、お茶を1杯3.75ドルで販売しています。火曜日には、お茶よりもコーヒーを56杯多く販売し、総売上は526.50ドルでした。それぞれの飲み物を何杯売ったのでしょうか？
`

このテクニックは、数学の問題、論理的推論、トラブルシューティング、および複雑な意思決定プロセスに特に役立ちます。

### システムメッセージのエミュレーション：舞台を設定する

標準のChatGPTインターフェースではシステムメッセージ（AI動作のパラメータを設定する指示）に直接アクセスすることはできませんが、プロンプトでその効果をエミュレートすることができます。

**フォーマット**：会話の冒頭で、対話全体を通じてChatGPTにどのように行動してほしいかについての明確なガイドラインを設定します。

**例**：

```
この会話では、あなたに短編小説を改善するのを手伝ってくれる文章コーチとして行動してほしいです。キャラクター開発、プロットの一貫性、対話の真正性に焦点を当てた建設的な批評を提供してください。フィードバックを提供する際には、まず改善を提案する前に一つの肯定的な側面に言及してください。回答は簡潔に、約3〜4段落程度にしてください。

私の物語で何か不明な点がある場合は、仮定を立てる代わりに明確にする質問をしてください。
```

このアプローチは、複数の抜粋やアイデアを共有し、特定のスタイルで一貫したフィードバックが必要な長い会話に特に役立ちます。

### 例の使用：例示による学習

ときには、欲しい結果を正確に得る最も簡単な方法は、ChatGPTに望ましい出力の例を示すことです。

**フォーマット**：「このフォーマットとスタイルに従って、[タスク]をしてほしいです：[例]」

**例**：

```
小さなパン屋のソーシャルメディア投稿のアイデアを、以下のフォーマットとスタイルに従って作成してほしいです：

#MondayMuffins（マンデーマフィン）：「ブルーベリーストゥゼルマフィンで週の始まりを甘く迎えましょう！地元で調達したベリーを使用して今朝焼きたてです。朝のコーヒーとの相性抜群、または午後のおやつに最適です！💙🧁」

このような親しみやすいトーン、絵文字スタイル、そしてハッシュタグの後に投稿テキストが続くフォーマットを使用して、異なる商品のためのアイデアをさらに5つ作成してください。
```

このテクニック（時に「少ないショット学習」と呼ばれる）は、あなたの期待に正確に一致する結果を得る可能性を劇的に向上させます。

### 複数ターンの改良：反復的な改善

複雑なタスクでは、会話の複数ターンに作業を分け、それぞれが前のターンに基づいて構築することが有益な場合が多いです。

**アプローチ**：

1. 基本的なリクエストから始める
2. 応答を確認する
3. 特定の改良を求める
4. 満足するまで繰り返す

**例の順序**：

1. `持続可能な都市交通オプションに関するプレゼンテーションの簡単な導入文を作成してください。`
2. *[ChatGPTが草案を提供]*
3. `良い出発点です。従来の車両からの炭素排出量に関する簡単な統計を含めるように修正していただけますか？`
4. *[ChatGPTが修正草案を提供]*
5. `今度は、学術者ではなく若い専門家に話しかけるように、トーンをより魅力的で会話的にしてください。`

この反復的なアプローチにより、単一の複雑なプロンプトで完璧な結果を得ようとするのではなく、段階的にコンテンツやアイデアの開発を導くことができます。

### 複数のテクニックの組み合わせ

最も効果的なプロンプト作成は、これらのテクニックのいくつかを組み合わせることが多いです。ここでは、役割割り当て、形式指定、および例を統合した例を示します：

```markdown
あなたには中学生のための経験豊富な科学教師として行動してほしいです。さまざまな学習スタイルを持つ7年生を惹きつける光合成に関する授業計画を作成してください。授業計画には以下を含めてください：

1. 学習目標（箇条書きで）
2. 5分間の注目を集める導入活動
3. メインコンテンツのプレゼンテーション（15分）
4. ハンズオン活動（20分）
5. 評価戦略

ハンズオン活動については、次のようなものが効果的です：「生徒たちは二酸化炭素分子が光合成プロセスを通る旅をコミック形式で作成する。」

12〜13歳の子供たちにアクセスしやすい言語を使いながら、科学的に正確であることを維持してください。
```

この包括的なプロンプトは、役割（科学教師）、形式（タイミングを含む構造化された授業計画）、例（活動セクション用）、およびパラメータ（中学校の言語レベル、科学的正確さ）を組み合わせています。

### これらのテクニックを使用するタイミング

すべての対話に高度なプロンプト作成が必要なわけではありません。以下の場合にこれらのテクニックを使用してください：

- 基本的なプロンプトが望む結果を生み出していない場合
- 非常に特定の形式やスタイルが必要な場合
- 複雑または微妙なトピックに取り組んでいる場合
- 難しい問題を解決しようとしている場合
- 特定のパラメータに従う創造的なコンテンツが必要な場合

練習を重ねることで、異なるタイプのリクエストにどのテクニックが最も効果的かについての直感が発達します。 